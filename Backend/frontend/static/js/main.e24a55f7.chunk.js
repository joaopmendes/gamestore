(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{132:function(e,t,r){e.exports=r.p+"static/media/banner.8e6374ad.jpg"},140:function(e,t,r){e.exports=r(215)},193:function(e,t,r){},215:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),o=r(13),c=r.n(o),i=r(22),l=r(32),s=r(8),u=(r(125),{user:{addresses:[],admin:!1,cart:{_id:"",items:[],totalPrice:0},email:"",name:"",orders:[],token:""},userLoggedIn:!1}),d=Object(l.b)({name:"auth",initialState:u,reducers:{login:function(e,t){return e.userLoggedIn=!0,e.user=t.payload,localStorage.setItem("token",t.payload.token),e},logout:function(e){return e=u,localStorage.removeItem("token"),e}}}),m=function(e){return e.auth.userLoggedIn},p=function(e){return e.auth.user},f=function(e){return e.auth.user.token},E=r(126),g=r.n(E),b=Object(l.b)({name:"loaders",initialState:[],reducers:{addLoader:function(e,t){return e.find((function(e){return e===t.payload}))||e.push(t.payload),e},removeLoader:function(e,t){return e.filter((function(e){return e!==t.payload}))}}}),v=function(e){return e.loaders.length>0},h=Object(l.b)({name:"controls",initialState:{},reducers:{}}),O=Object(l.b)({name:"product",initialState:{products:[],productModalOpen:{open:!1,editMode:!1,editProduct:{_id:"",name:"",categories:[],price:0,console:"",productImage:""}}},reducers:{setProductsTo:function(e,t){return e.products=t.payload,e},setProductModalTo:function(e,t){return e.productModalOpen=t.payload,e}}}),y=Object(l.b)({name:"categories",initialState:{categories:[],categoryModalOpen:{open:!1,editMode:!1,editCategory:{_id:"",name:""}}},reducers:{setCategoriesTo:function(e,t){return e.categories=t.payload,e},setCategoryModalTo:function(e,t){return e.categoryModalOpen=t.payload,e}}}),w=Object(l.a)({reducer:{auth:d.reducer,loaders:b.reducer,controls:h.reducer,products:O.reducer,categories:y.reducer},middleware:[g.a]}),x=function(){return Object(s.b)()},T=function(e){var t=e.children;return n.a.createElement(s.a,{store:w},t)},j=r(23),C=r(17),k=r(73),I=r(19),_=r(14);function L(){var e=Object(I.a)(["\n  text-align: center;\n  font-size: 2rem;\n  font-family: 'Balsamiq Sans', cursive;\n  text-transform: uppercase;\n  color: black;\n  margin: 1rem auto;\n"]);return L=function(){return e},e}function P(){var e=Object(I.a)(["\n  width: 100%;\n  display: block;\n  height: ",";\n"]);return P=function(){return e},e}function N(){var e=Object(I.a)(["\n  text-align: center;\n  font-size: 25px;\n  font-family: 'Balsamiq Sans', cursive;\n  text-transform: uppercase;\n  color: white;\n"]);return N=function(){return e},e}function M(){var e=Object(I.a)(["\n position: absolute;\n top: -55px;\n left: 10px;\n right: 10px;\n"]);return M=function(){return e},e}function S(){var e=Object(I.a)(["\n  width: 600px;\n  margin: 10em auto;\n  position: relative;\n"]);return S=function(){return e},e}function D(){var e=Object(I.a)(["\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n"]);return D=function(){return e},e}var A=_.b.div(D()),R=_.b.div(S()),F=_.b.div(M()),B=_.b.h1(N()),q=_.b.div(P(),(function(e){return e.height||"30px"})),G=_.b.h1(L());function z(){var e=Object(I.a)(["\n  background: rgba(255,255,255,0.87);\n  width: 100%;\n  height: 100%;\n"]);return z=function(){return e},e}function U(){var e=Object(I.a)(["\n  width: 100%;\n  height: 100%;\n"]);return U=function(){return e},e}var V=_.b.div(U()),Y=_.b.div(z()),J=r(67),Z=r(3),W=function(){var e=x(),t=Object(i.useToasts)().addToast,r=Object(a.useState)(!1),o=Object(J.a)(r,2),c=o[0],l=o[1],u=Object(s.c)(p),f=Object(s.c)(m);return n.a.createElement("header",null,n.a.createElement(Z.y,{style:{background:"hsl(210, 12%, 16%)"},dark:!0,expand:"md"},n.a.createElement(Z.h,null,n.a.createElement(Z.z,{href:"/"},n.a.createElement("strong",null,"Gameshop")),n.a.createElement(Z.B,{onClick:function(){return l(!c)}}),n.a.createElement(Z.g,{isOpen:c,navbar:!0},n.a.createElement(Z.A,{right:!0},f?n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.w,null,n.a.createElement(Z.j,null,n.a.createElement(Z.m,{nav:!0,caret:!0},n.a.createElement("div",{className:"d-none d-md-inline"},u.name)),n.a.createElement(Z.l,{className:"dropdown-default"},n.a.createElement(Z.k,null,n.a.createElement(j.c,{to:"/notimplemented"},"Profile")),u.admin?n.a.createElement(Z.k,null,n.a.createElement(j.c,{to:"/backoffice"},"Backoffice")):null,n.a.createElement(Z.k,{onClick:function(){t("Logout successfully",{appearance:"success"}),e(d.actions.logout())}},n.a.createElement(j.c,{to:"/"},"Logout")))))):n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.w,null,n.a.createElement(Z.x,{to:"/register"},"Sign In")),n.a.createElement(Z.w,null,n.a.createElement(Z.x,{to:"/login"},"Login"))))))))};function X(){var e=Object(I.a)(["\n  width: 100%;\n  height: 4rem;\n  background: black;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  font-size: 1rem;\n  p {\n  margin-bottom: 10px;\n  }\n  \n  ","\n"]);return X=function(){return e},e}var H=_.b.div(X(),(function(e){return e.footerFixedBottom?"\n      position: fixed;\n      bottom: 0;\n    ":""})),K=function(e){var t=e.footerFixedBottom;return n.a.createElement(H,{footerFixedBottom:t},n.a.createElement("p",null,"Done by joaopmendes"),n.a.createElement("a",{href:"https://github.com/joaopmendes/gamestore",target:"_blank"},"Github"))},Q=function(e){var t=e.children,r=e.footerFixedBottom;return n.a.createElement(V,null,n.a.createElement(A,null,n.a.createElement(Y,null,n.a.createElement(W,null),n.a.createElement("div",{style:{width:"100%"}},t),n.a.createElement(K,{footerFixedBottom:r}))))};function $(){var e=Object(I.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  h1 {\n    font-size: 3rem;\n    font-family: 'Balsamiq Sans', cursive;\n    text-transform: uppercase;\n    color: white;\n    span {\n      font-size: 5rem;\n      color: ",";\n    }\n  }\n  p {\n    font-size: .9rem;\n    margin-top: 10px;\n    font-family: 'Balsamiq Sans', cursive;\n    text-transform: uppercase;\n    color: white;\n  }\n"]);return $=function(){return e},e}function ee(){var e=Object(I.a)(["\n  width: 100%;\n  height: 30rem;\n  background-size: cover;\n"]);return ee=function(){return e},e}function te(){var e=Object(I.a)(["\n  width: 100%;\n  position: relative;\n"]);return te=function(){return e},e}var re=_.b.div(te()),ae=_.b.img(ee()),ne=_.b.div($(),(function(e){return e.theme.primary})),oe=function(e){var t=e.backgroundImage;return n.a.createElement(re,null,n.a.createElement(ae,{src:t,className:"img-fluid",alt:"My photo"}),n.a.createElement(ne,null,n.a.createElement("h1",null,n.a.createElement("span",null,"Game"),"Shop"),n.a.createElement("p",null,"Buy any game of any console right here!")))},ce=r(132),ie=r.n(ce),le=function(){return n.a.createElement(Q,{footerFixedBottom:!0},n.a.createElement(oe,{backgroundImage:ie.a}))},se=r(6),ue=r.n(se),de=r(9),me=r(27),pe=r.n(me),fe={getUserInfo:function(){var e=Object(de.a)(ue.a.mark((function e(t){var r,a,n,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},t&&(r.authorization="Bearer ".concat(t)),e.next=5,pe.a.get("/api/users/profile",{headers:r});case 5:return a=e.sent,e.abrupt("return",{hasError:!1,data:null===a||void 0===a?void 0:a.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.errorMessage)||"It was not possible to get the user information."});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(de.a)(ue.a.mark((function e(t){var r,a,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.post("/api/users/login",t);case 3:return r=e.sent,e.abrupt("return",{hasError:!1,data:null===r||void 0===r?void 0:r.data});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.errorMessage)||"It was not possible to login."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(de.a)(ue.a.mark((function e(t){var r,a,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.post("/api/users/register",t);case 3:return r=e.sent,e.abrupt("return",{hasError:!1,data:null===r||void 0===r?void 0:r.data});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.errorMessage)||"It was not possible to login."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Ee=r(11),ge=r(21),be=ge.c().shape({name:ge.d().label("Name").required("The field name is required"),email:ge.d().label("Email").email().required(),password1:ge.d().label("Password").required(),password2:ge.d().required().label("Confirm password").test("passwords-match","Passwords must match.",(function(e){return this.parent.password1===e}))}),ve=function(){var e=Object(i.useToasts)().addToast,t=Object(C.g)(),r=x();return n.a.createElement(Q,{footerFixedBottom:!0},n.a.createElement(R,null,n.a.createElement(Z.h,null,n.a.createElement(Z.c,null,n.a.createElement(Z.d,null,n.a.createElement(Z.E,null,n.a.createElement(Z.f,{md:"12"},n.a.createElement(F,null,n.a.createElement(Z.e,{className:"form-header blue-gradient rounded"},n.a.createElement(B,{className:"my-3"},n.a.createElement(Z.n,{icon:"lock"})," Sign In:"))),n.a.createElement("div",{className:"mt-5"}),n.a.createElement(Ee.c,{initialValues:{email:"",name:"",password1:"",password2:""},validationSchema:be,onSubmit:function(){var a=Object(de.a)(ue.a.mark((function a(n,o){var c;return ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(b.actions.addLoader("register_loader")),a.next=3,fe.register(n);case 3:if(c=a.sent,r(b.actions.removeLoader("register_loader")),!c.hasError){a.next=8;break}return e(c.errorMessage,{appearance:"error"}),a.abrupt("return");case 8:e("Registered Successfully. Please Login.",{appearance:"success"}),e("Being redirected to login page.",{appearance:"info"}),t.push("/login"),o.setSubmitting(!1);case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),render:function(){return n.a.createElement(Ee.b,null,n.a.createElement(Ee.a,{name:"name",render:function(e){var t=e.field,r=e.meta;return n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Name",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"user",group:!0,type:"text",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error))}}),n.a.createElement(Ee.a,{name:"email",render:function(e){var t=e.field,r=e.meta;return n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Email",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"envelope",group:!0,type:"text",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error))}}),n.a.createElement(Ee.a,{name:"password1",render:function(e){var t=e.field,r=e.meta;return n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Password",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"lock",group:!0,type:"password",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error))}}),n.a.createElement(Ee.a,{name:"password2",render:function(e){var t=e.field,r=e.meta;return n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Confirm Password",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"exclamation-triangle",group:!0,type:"password",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error))}}),n.a.createElement("div",{className:"text-center"},n.a.createElement(Z.b,{outline:!0,color:"primary",type:"submit"},"Register")))}}))))))))},he=ge.c().shape({email:ge.d().label("Email").email().required(),password:ge.d().label("Password").required()}),Oe=function(){var e=Object(i.useToasts)().addToast,t=Object(C.g)(),r=x();return n.a.createElement(Q,{footerFixedBottom:!0},n.a.createElement(R,null,n.a.createElement(Z.h,null,n.a.createElement(Z.c,null,n.a.createElement(Z.d,null,n.a.createElement(Z.E,null,n.a.createElement(Z.f,{md:"12"},n.a.createElement(F,null,n.a.createElement(Z.e,{className:"form-header blue-gradient rounded"},n.a.createElement(B,{className:"my-3"},n.a.createElement(Z.n,{icon:"lock"})," Login:"))),n.a.createElement(q,{height:"50px"}),n.a.createElement(Ee.c,{initialValues:{email:"",password:""},validationSchema:he,onSubmit:function(){var a=Object(de.a)(ue.a.mark((function a(n,o){var c;return ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(b.actions.addLoader("login_loader")),a.next=3,fe.login(n);case 3:if(c=a.sent,r(b.actions.removeLoader("login_loader")),!c.hasError){a.next=8;break}return e(c.errorMessage,{appearance:"error"}),a.abrupt("return");case 8:r(d.actions.login(c.data.user)),e("Login Successfully",{appearance:"success"}),e("Being redirected to home page.",{appearance:"info"}),t.push("/"),o.setSubmitting(!1);case 13:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),render:function(){return n.a.createElement(Ee.b,null,n.a.createElement(Ee.a,{name:"email",render:function(e){var t=e.field,r=e.meta;return n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Email",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"envelope",group:!0,type:"text",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error))}}),n.a.createElement(Ee.a,{name:"password",render:function(e){var t=e.field,r=e.meta;return n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Password",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"lock",group:!0,type:"password",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error))}}),n.a.createElement("p",null,"Yet not a member? Sign In ",n.a.createElement(Z.q,{className:"d-inline m-0 p-0",to:"/register"},"here"),"."),n.a.createElement("div",{className:"text-center"},n.a.createElement(Z.b,{outline:!0,color:"primary",type:"submit"},"Login")))}}))))))))},ye=function(e){var t=e.Component,r=Object(k.a)(e,["Component"]),a=Object(s.c)(m);return n.a.createElement(C.b,Object.assign({},r,{render:function(e){return a?n.a.createElement(C.a,{to:"/"}):n.a.createElement(t,e)}}))},we=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(C.b,{path:"/",exact:!0,render:function(){return n.a.createElement(le,null)}}),n.a.createElement(ye,{path:"/register",Component:ve}),n.a.createElement(ye,{path:"/Login",Component:Oe}))};function xe(){var e=Object(I.a)(["\n    width: 100%;\n    padding: 2rem;\n    h1 {\n    font-size: 1.2rem;\n    font-family: 'Balsamiq Sans', cursive;\n    text-transform: uppercase;\n    color: black;\n    text-align: center;\n    span {\n      font-size: 1.4rem;\n      color: ",";\n    }\n  }\n"]);return xe=function(){return e},e}var Te=_.b.div(xe(),(function(e){return e.theme.primary})),je=function(){return n.a.createElement("div",{className:"sidebar-fixed position-fixed",style:{background:"hsl(210, 12%, 16%)",zIndex:"2",height:"100%"}},n.a.createElement("a",{href:"#!",className:"logo-wrapper waves-effect"},n.a.createElement(Te,null,n.a.createElement("h1",null,n.a.createElement("span",null,"Game"),"store"))),n.a.createElement(Z.r,{className:"list-group-flush"},n.a.createElement(j.c,{exact:!0,to:"/backoffice",style:{background:"hsl(210, 12%, 16%)",height:"100%"},activeClassName:"activeClass"},n.a.createElement(Z.s,null,n.a.createElement(Z.n,{icon:"chart-pie",className:"mr-3"}),"Dashboard")),n.a.createElement(j.c,{exact:!0,to:"/backoffice/categories",style:{background:"hsl(210, 12%, 16%)",height:"100%"},activeClassName:"activeClass"},n.a.createElement(Z.s,null,n.a.createElement(Z.n,{icon:"chart-pie",className:"mr-3"}),"Categories")),n.a.createElement(j.c,{exact:!0,to:"/backoffice/products",style:{background:"hsl(210, 12%, 16%)",height:"100%"},activeClassName:"activeClass"},n.a.createElement(Z.s,null,n.a.createElement(Z.n,{icon:"chart-pie",className:"mr-3"}),"Products"))))},Ce=function(e){var t=e.children;return n.a.createElement(n.a.Fragment,null,n.a.createElement(je,null),n.a.createElement(W,null),n.a.createElement("div",{style:{marginLeft:"270px",paddingTop:"2rem"}},n.a.createElement(Z.h,null,t)))},ke=function(){return n.a.createElement(Ce,null,"teste")},Ie={getCategories:function(){var e=Object(de.a)(ue.a.mark((function e(){var t,r,a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.get("/api/categories");case 3:return t=e.sent,e.abrupt("return",{hasError:!1,data:t.data});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.errorMessage)||"It was not possible to get the categories information."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),createUpdateCategory:function(){var e=Object(de.a)(ue.a.mark((function e(t){var r,a,n,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={_id:t.id,name:t.name},t.id||delete r._id,e.next=5,pe.a.post("/api/categories",r);case 5:return a=e.sent,e.abrupt("return",{hasError:!1,data:a.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.errorMessage)||"Something bad happened."});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),removeCategories:function(){var e=Object(de.a)(ue.a.mark((function e(t){var r,a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.post("/api/categories/delete",{ids:t.ids});case 3:return e.abrupt("return",{hasError:!1,data:null});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.errorMessage)||"It was not possible to get the categories information."});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},_e=function(){var e=Object(s.c)((function(e){return e.categories})).categories,t=Object(s.b)(),r=Object(i.useToasts)().addToast,o=n.a.useState({columns:[{label:"Id",field:"id",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Id"}},{label:"Name",field:"name",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Name"}},{label:"Options",field:"options",width:150}],rows:[]}),c=Object(J.a)(o,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){u({columns:[{label:"Id",field:"id",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Id"}},{label:"Name",field:"name",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Name"}},{label:"Options",field:"options",width:150}],rows:e.map((function(e){return{name:e.name,id:e._id,options:[n.a.createElement(Z.b,{key:"1",color:"danger",onClick:Object(de.a)(ue.a.mark((function a(){var n,o;return ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ie.removeCategories({ids:e._id});case 2:if(!(n=a.sent).hasError){a.next=7;break}return r(n.errorMessage,{appearance:"error"}),t(b.actions.removeLoader("DELETE_CATEGORIES")),a.abrupt("return");case 7:return t(b.actions.addLoader("DELETE_CATEGORIES")),a.next=10,Ie.getCategories();case 10:if(!(o=a.sent).hasError){a.next=15;break}return r(o.errorMessage,{appearance:"error"}),t(b.actions.removeLoader("DELETE_CATEGORIES")),a.abrupt("return");case 15:r("Category Removed Successfully",{appearance:"success"}),t(b.actions.removeLoader("DELETE_CATEGORIES")),t(y.actions.setCategoriesTo(o.data.categories));case 18:case"end":return a.stop()}}),a)})))},"Delete"),n.a.createElement(Z.b,{key:"2",color:"warning",onClick:function(){t(y.actions.setCategoryModalTo({open:!0,editMode:!0,editCategory:{name:e.name,_id:e._id}}))}},"Edit")]}}))})}),[e]),n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.i,{hover:!0,entriesOptions:[5,20,25],entries:5,pagesAmount:4,data:l,fullPagination:!0}),n.a.createElement(Z.b,{onClick:function(){t(y.actions.setCategoryModalTo({open:!0,editMode:!1,editCategory:{name:"",_id:""}}))}},"Create Category"))},Le=function(){var e=Object(s.c)((function(e){return e.categories})).categoryModalOpen,t=e.open,r=e.editCategory,a=e.editMode,o=Object(s.b)(),c=Object(i.useToasts)().addToast,l=function(){o(y.actions.setCategoryModalTo({editCategory:{_id:"",name:""},editMode:!1,open:!1}))},u={id:a?r._id:null,name:a?r.name:""},d=ge.c().shape({name:ge.d().label("Name").required()});return n.a.createElement(Z.h,null,n.a.createElement(Z.t,{isOpen:t,toggle:l,inline:!1,noClickableBodyWithoutBackdrop:!1,overflowScroll:!1},n.a.createElement(Z.v,{toggle:l},a?"Edit Category":"Create Category"),n.a.createElement(Z.u,null,n.a.createElement(Ee.c,{initialValues:u,validationSchema:d,onSubmit:function(){var e=Object(de.a)(ue.a.mark((function e(t,r){var a,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(b.actions.addLoader("CREATE_EDIT_CATEGORY_LOADER")),e.next=3,Ie.createUpdateCategory(t);case 3:if(a=e.sent,o(b.actions.removeLoader("CREATE_EDIT_CATEGORY_LOADER")),!a.hasError){e.next=9;break}return c(a.errorMessage,{appearance:"error"}),o(b.actions.removeLoader("CREATE_EDIT_CATEGORY_LOADER")),e.abrupt("return");case 9:return c("Operation done Successfully",{appearance:"success"}),e.next=12,Ie.getCategories();case 12:if(!(n=e.sent).hasError){e.next=17;break}return c(n.errorMessage,{appearance:"error"}),o(b.actions.removeLoader("CREATE_EDIT_CATEGORY_LOADER")),e.abrupt("return");case 17:o(y.actions.setCategoriesTo(n.data.categories)),o(b.actions.removeLoader("CREATE_EDIT_CATEGORY_LOADER")),r.setSubmitting(!1),l();case 21:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),render:function(){return n.a.createElement(Ee.b,null,n.a.createElement(Ee.a,{name:"name",render:function(e){var t=e.field,r=e.meta;return n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Name",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"envelope",group:!0,type:"text",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error))}}),n.a.createElement("div",{className:"text-center"},n.a.createElement(Z.b,{outline:!0,color:"primary",type:"submit"},a?"Save":"Create")))}}))))},Pe=function(){return n.a.createElement(Ce,null,n.a.createElement(G,null,"Categories List"),n.a.createElement(_e,null),n.a.createElement(Le,null))},Ne={getListOfProducts:function(){var e=Object(de.a)(ue.a.mark((function e(){var t,r,a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.get("/api/products");case 3:return t=e.sent,e.abrupt("return",{hasError:!1,data:null===t||void 0===t?void 0:t.data});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.errorMessage)||"It was not possible to get the products information."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),createUpdateProduct:function(){var e=Object(de.a)(ue.a.mark((function e(t){var r,a,n,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new FormData,t.id&&r.append("_id",t.id),r.append("name",t.name),r.append("price",JSON.stringify(t.price)),r.append("categories",JSON.stringify(t.categories)),r.append("console",t.console),r.append("productImage",t.productImage),e.next=10,pe.a.post("/api/products",r,{headers:{"Content-Type":"multipart/form-data"}});case 10:return a=e.sent,e.abrupt("return",{hasError:!1,data:a.data});case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.errorMessage)||"Something bad happened."});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),removeProducts:function(){var e=Object(de.a)(ue.a.mark((function e(t){var r,a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.a.post("/api/products/delete",{ids:t.ids});case 3:return e.abrupt("return",{hasError:!1,data:null});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{hasError:!0,errorMessage:(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.errorMessage)||"It was not possible to delete the product."});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},Me=function(){var e=Object(s.c)((function(e){return e.products})).products,t=Object(s.b)(),r=Object(i.useToasts)().addToast,o=n.a.useState({columns:[{label:"Id",field:"id",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Id"}},{label:"Name",field:"name",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Name"}},{label:"Options",field:"options",width:150}],rows:[]}),c=Object(J.a)(o,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){u({columns:[{label:"Id",field:"id",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Id"}},{label:"Name",field:"name",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Name"}},{label:"Options",field:"options",width:150}],rows:e.map((function(e){return{name:e.name,id:e._id,options:[n.a.createElement(Z.b,{key:"1",color:"danger",onClick:Object(de.a)(ue.a.mark((function a(){var n,o;return ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(b.actions.addLoader("DELETE_PROD")),a.next=3,Ne.removeProducts({ids:e._id});case 3:if(!(n=a.sent).hasError){a.next=8;break}return r(n.errorMessage,{appearance:"error"}),t(b.actions.removeLoader("DELETE_PROD")),a.abrupt("return");case 8:return a.next=10,Ne.getListOfProducts();case 10:if(!(o=a.sent).hasError){a.next=15;break}return r(o.errorMessage,{appearance:"error"}),t(b.actions.removeLoader("DELETE_PROD")),a.abrupt("return");case 15:r("Product Removed Successfully",{appearance:"success"}),t(b.actions.removeLoader("DELETE_PROD")),t(O.actions.setProductsTo(o.data.products));case 18:case"end":return a.stop()}}),a)})))},"Delete"),n.a.createElement(Z.b,{key:"2",color:"warning",onClick:function(){t(O.actions.setProductModalTo({open:!0,editMode:!0,editProduct:{_id:e._id,name:e.name,categories:e.categories,price:e.price,console:e.console,productImage:e.productImage}}))}},"Edit")]}}))})}),[e]),n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.i,{hover:!0,entriesOptions:[5,20,25],entries:5,pagesAmount:4,data:l,fullPagination:!0}),n.a.createElement(Z.b,{onClick:function(){t(O.actions.setProductModalTo({open:!0,editMode:!1,editProduct:{_id:"",categories:[],name:"",price:0,console:"",productImage:""}}))}},"Create Category"))},Se=r(103),De=r(138),Ae=function(e){var t=e.field,r=e.form,a=e.options;return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{htmlFor:t.name},"Categories"),n.a.createElement(De.a,{id:t.name,options:a,name:t.name,value:t.value,isMulti:!0,onChange:function(e){return r.setFieldValue(t.name,e,!0)},onBlur:function(){r.setFieldTouched(t.name)}}),n.a.createElement("p",{style:{color:"red"}},r.touched.categories&&r.errors.categories&&r.errors.categories))},Re=function(){var e=Object(s.c)((function(e){return e.products})).productModalOpen,t=e.open,r=e.editProduct,a=e.editMode,o=Object(s.c)((function(e){return e.categories.categories})),c=null===o||void 0===o?void 0:o.map((function(e){return{label:e.name,value:e._id}})),l=Object(s.b)(),u=Object(i.useToasts)().addToast,d=function(){l(O.actions.setProductModalTo({editProduct:{_id:"",categories:[],name:"",price:0,console:"",productImage:""},editMode:!1,open:!1}))},m={id:a?r._id:null,name:a?r.name:"",categories:a?r.categories.map((function(e){return{label:e.name,value:e._id}})):[],price:a?r.price:0,console:a?r.console:"",productImage:""},p=ge.c().shape({name:ge.d().label("Name").required(),console:ge.d().label("Platform").oneOf(["PS4","XBOX","PC"]).required(),price:ge.b().label("Price").min(30).required(),categories:ge.a().min(1)});return n.a.createElement(Z.h,null,n.a.createElement(Z.t,{isOpen:t,toggle:d,inline:!1,noClickableBodyWithoutBackdrop:!1,overflowScroll:!1},n.a.createElement(Z.v,{toggle:d},a?"Edit Product":"Create Product"),n.a.createElement(Z.u,null,n.a.createElement(Ee.c,{initialValues:m,validationSchema:p,onSubmit:function(){var e=Object(de.a)(ue.a.mark((function e(t,r){var a,n,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),l(b.actions.addLoader("CREATE_EDIT_PRODUCT_LOADER")),a=Object(Se.a)(Object(Se.a)({},t),{},{categories:t.categories.reduce((function(e,t){return e.push(t.value),e}),[])}),e.next=5,Ne.createUpdateProduct(a);case 5:if(n=e.sent,l(b.actions.removeLoader("CREATE_EDIT_PRODUCT_LOADER")),!n.hasError){e.next=11;break}return u(n.errorMessage,{appearance:"error"}),l(b.actions.removeLoader("CREATE_EDIT_PRODUCT_LOADER")),e.abrupt("return");case 11:return u("Operation done Successfully",{appearance:"success"}),e.next=14,Ne.getListOfProducts();case 14:if(!(o=e.sent).hasError){e.next=19;break}return u(o.errorMessage,{appearance:"error"}),l(b.actions.removeLoader("CREATE_EDIT_PRODUCT_LOADER")),e.abrupt("return");case 19:l(O.actions.setProductsTo(o.data.products)),l(b.actions.removeLoader("CREATE_EDIT_PRODUCT_LOADER")),r.setSubmitting(!1),d();case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),render:function(){return n.a.createElement(Ee.b,null,n.a.createElement(Ee.a,{name:"name",render:function(e){var t=e.field,r=e.meta;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Name",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"envelope",group:!0,type:"text",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error)))}}),n.a.createElement(Ee.a,{name:"price",render:function(e){var t=e.field,r=e.meta;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Price",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"envelope",group:!0,type:"number",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error)))}}),n.a.createElement(Ee.a,{name:"console",render:function(e){var t=e.field,r=e.meta;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(Z.p,Object.assign({},t,{label:"Platform",className:r.touched?r.error?"is-invalid":"is-valid":"",icon:"envelope",group:!0,type:"text",error:"wrong",success:"right"})),n.a.createElement("p",{style:{color:"red"}},r.touched&&r.error&&r.error)))}}),n.a.createElement(Ee.a,{id:"categories",name:"categories",component:Ae,options:c}),n.a.createElement(Ee.a,{name:"productImage",render:function(e){var t=e.field,r=(e.meta,e.form);return console.log("form",r),console.log("field",t),n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{style:{margin:"1rem 0"}},"Product Image"),n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"inputGroupFileAddon01"},"Upload")),n.a.createElement("div",{className:"custom-file"},n.a.createElement("input",{type:"file",className:"custom-file-input",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01",onChange:function(e){var t,a;r.setFieldValue("productImage",(null===e||void 0===e||null===(t=e.target)||void 0===t||null===(a=t.files)||void 0===a?void 0:a[0])||"")}}),n.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},t.value.name||"Choose a file"))))}}),n.a.createElement("div",{className:"text-center"},n.a.createElement(Z.b,{outline:!0,color:"primary",type:"submit"},a?"Save":"Create")))}}))))},Fe=function(){return n.a.createElement(Ce,null,n.a.createElement(G,null,"Products List"),n.a.createElement(Me,null),n.a.createElement(Re,null))},Be=function(e){var t=e.Component,r=Object(k.a)(e,["Component"]),a=Object(s.c)((function(e){return e.auth.user.admin}));return n.a.createElement(C.b,Object.assign({},r,{render:function(e){return a?n.a.createElement(t,e):n.a.createElement(C.a,{to:"/"})}}))},qe=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Be,{path:"/backoffice",exact:!0,Component:ke}),n.a.createElement(Be,{path:"/backoffice/categories",Component:Pe}),n.a.createElement(Be,{path:"/backoffice/products",Component:Fe}))},Ge=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(we,null),n.a.createElement(qe,null))},ze=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(j.a,null,n.a.createElement(C.d,null,n.a.createElement(Ge,null))))},Ue={primary:"#ff4d23",secundary:"#ffefec"},Ve=function(e){var t=e.children;return n.a.createElement(n.a.Fragment,null,n.a.createElement(_.a,{theme:Ue},t))},Ye=(r(189),r(190),r(191),r(192),r(193),r(136)),Je=r.n(Ye);function Ze(){var e=Object(I.a)(["\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  background: rgb(255,255,255, 0.5);\n  z-index: 9999;\n  transition: all 1s ease-in;\n"]);return Ze=function(){return e},e}var We=_.b.div(Ze()),Xe=function(e){var t=e.children,r=Object(s.c)(v);return n.a.createElement(n.a.Fragment,null,r&&n.a.createElement(We,null,n.a.createElement(Je.a,{type:"Oval",color:"#ff4d23",height:150,width:150})),t)},He=r(137),Ke=r.n(He),Qe=function(e){var t=e.children,r=Object(s.c)(f),o=x(),c=Object(i.useToasts)().addToast;Object(a.useEffect)((function(){pe.a.interceptors.request.use((function(e){return r&&!e.headers.authorization&&(e.headers.authorization="Bearer "+r),e}),(function(e){return Promise.reject(e)}))}),[r]),Object(a.useEffect)((function(){Object(de.a)(ue.a.mark((function e(){var t,a,n,c,i;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(b.actions.addLoader("APP_INITIALIZATOR")),!(t=localStorage.getItem("token"))||r){e.next=14;break}if(!((null===(a=Ke()(t))||void 0===a?void 0:a.exp)<Date.now()/1e3)){e.next=6;break}return localStorage.removeItem("token"),e.abrupt("return");case 6:return e.next=8,fe.getUserInfo(t);case 8:if(!(n=e.sent).hasError){e.next=13;break}return localStorage.removeItem("token"),o(b.actions.removeLoader("APP_INITIALIZATOR")),e.abrupt("return");case 13:o(d.actions.login(n.data.user));case 14:return e.next=16,Ie.getCategories();case 16:if(!(c=e.sent).hasError){e.next=20;break}return l(),e.abrupt("return");case 20:return o(y.actions.setCategoriesTo(c.data.categories)),e.next=23,Ne.getListOfProducts();case 23:if(!(i=e.sent).hasError){e.next=27;break}return l(),e.abrupt("return");case 27:o(O.actions.setProductsTo(i.data.products)),o(b.actions.removeLoader("APP_INITIALIZATOR"));case 29:case"end":return e.stop()}}),e)})))()}),[]);var l=function(){o(b.actions.removeLoader("APP_INITIALIZATOR")),c("Something went wrong trying to load the page, please refresh.",{appearance:"error"})};return n.a.createElement(n.a.Fragment,null,t)},$e=function(){return n.a.createElement(Ve,null,n.a.createElement(T,null,n.a.createElement(i.ToastProvider,{placement:"top-right",style:{zIndex:200},autoDismiss:!0,autoDismissTimeout:6e3},n.a.createElement(Xe,null,n.a.createElement(Qe,null,n.a.createElement(ze,null))))))};c.a.render(n.a.createElement($e,null),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.e24a55f7.chunk.js.map